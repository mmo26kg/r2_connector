<section class="tabs">
    <div class="tab-buttons">
        <button data-tab="upload" class="active">Upload</button>
        <button data-tab="download">Download</button>
        <button data-tab="backup">Backup</button>
        <button data-tab="cron">Cron</button>
        <button data-tab="files">Files</button>
        <button data-tab="logs">Logs</button>
    </div>

    <div class="tab-contents">
        <div id="upload" class="tab-content active">
            <h2>Upload File</h2>
            <div class="description">
                <p><strong>üì§ H∆∞·ªõng d·∫´n Upload:</strong></p>
                <ul>
                    <li><strong>Upload exe (auto-clean):</strong> D√†nh cho file .exe c·ªßa TadDesign. T·ª± ƒë·ªông x√≥a version
                        c≈© v√† c·∫≠p nh·∫≠t link download tr√™n website.</li>
                    <li><strong>Auto:</strong> T·ª± ƒë·ªông ch·ªçn ph∆∞∆°ng th·ª©c upload ph√π h·ª£p (single ho·∫∑c multipart) d·ª±a tr√™n
                        k√≠ch th∆∞·ªõc file.</li>
                    <li><strong>Single:</strong> Cho file nh·ªè d∆∞·ªõi 100MB. Upload nhanh, ph√π h·ª£p cho h√¨nh ·∫£nh, document.
                    </li>
                    <li><strong>Multipart:</strong> Cho file l·ªõn tr√™n 100MB (t·ªëi ƒëa 5TB). Upload theo t·ª´ng ph·∫ßn, ·ªïn ƒë·ªãnh
                        h∆°n.</li>
                </ul>
                <p><strong>üí° L∆∞u √Ω:</strong> Key m·∫∑c ƒë·ªãnh l√† "exe/TadSetup.exe" - c√≥ th·ªÉ thay ƒë·ªïi (b·∫Øt bu·ªôc ph·∫£i b·∫Øt
                    ƒë·∫ßu b·∫±ng exe/). Progress bar
                    s·∫Ω hi·ªÉn th·ªã % upload realtime.</p>
                <p> Khi thanh progress bar load xong, ƒë·ª£i kho·∫£ng 2 ph√∫t, link t·∫£i m·ªõi s·∫Ω ƒë∆∞·ª£c c·∫≠p nh·∫≠t l√™n website</p>
            </div>
            <form id="uploadForm">
                <label>File: <input type="file" name="file" required /></label>
                <label>Key (ƒë∆∞·ªùng d·∫´n l∆∞u tr√™n cloud): <input type="text" name="key" value="exe/TadSetup.exe"
                        placeholder="v√≠ d·ª•: exe/TadSetup.exe" /></label>
                <select name="method" id="uploadMethod">
                    <option value="exe" selected>Upload exe (auto-clean)</option>
                    <option value="auto">Auto</option>
                    <option value="single">Single</option>
                    <option value="large">Multipart</option>
                </select>
                <button type="submit">Upload</button>
            </form>
            <div id="uploadProgress" style="display:none">
                <div class="progress-container">
                    <div class="progress-bar" id="uploadProgressBar"></div>
                </div>
                <div id="uploadStatus" class="status-text"></div>
            </div>
        </div>
        <div id="download" class="tab-content">
            <h2>Download File</h2>
            <div class="description">
                <p><strong>üì• H∆∞·ªõng d·∫´n Download:</strong></p>
                <ul>
                    <li>Nh·∫≠p <strong>Key</strong> (ƒë∆∞·ªùng d·∫´n file tr√™n cloud). V√≠ d·ª•: <code>exe/TadSetup.exe</code></li>
                    <li>B·∫•m n√∫t <strong>Download</strong> - file s·∫Ω ƒë∆∞·ª£c t·∫£i v·ªÅ m√°y t·ª± ƒë·ªông.</li>
                    <li>Progress bar hi·ªÉn th·ªã % download v√† MB ƒë√£ t·∫£i / t·ªïng MB.</li>
                </ul>
                <p><strong>üí° Tip:</strong> ƒê·ªÉ bi·∫øt Key c·ªßa file, v√†o tab <strong>Files</strong> ƒë·ªÉ xem danh s√°ch t·∫•t c·∫£
                    file.</p>
            </div>
            <form id="downloadForm">
                <label>Key (ƒë∆∞·ªùng d·∫´n file): <input type="text" name="key" placeholder="v√≠ d·ª•: exe/TadSetup.exe"
                        required /></label>
                <button type="submit">Download</button>
            </form>
            <div id="downloadProgress" style="display:none">
                <div class="progress-container">
                    <div class="progress-bar" id="downloadProgressBar"></div>
                </div>
                <div id="downloadStatus" class="status-text"></div>
            </div>
        </div>

        <div id="backup" class="tab-content">
            <h2>Backup Database</h2>
            <div class="description">
                <p><strong>üíæ H∆∞·ªõng d·∫´n Backup PostgreSQL:</strong></p>
                <ul>
                    <li><strong>Kh√¥ng check "Use custom backup":</strong> S·ª≠ d·ª•ng pg_dump (nhanh h∆°n, chu·∫©n h∆°n - khuy·∫øn
                        ngh·ªã).</li>
                    <li><strong>Check "Use custom backup":</strong> D√πng khi server kh√¥ng c√≥ pg_dump (v√≠ d·ª•: Railway v·ªõi
                        Nixpacks).</li>
                    <li><strong>Connection string:</strong> ƒê·ªÉ tr·ªëng s·∫Ω t·ª± ƒë·ªông d√πng DATABASE_URL t·ª´ server config.</li>
                    <li>Sau khi backup th√†nh c√¥ng, file .sql s·∫Ω t·ª± ƒë·ªông upload l√™n cloud storage.</li>
                </ul>
                <p><strong>üí° L∆∞u √Ω:</strong> Backup ƒë∆∞·ª£c l∆∞u v√†o folder <code>backups/</code> tr√™n cloud. Xem tab
                    <strong>Files</strong> ƒë·ªÉ download v·ªÅ.
                </p>
            </div>
            <form id="backupForm">
                <label><input type="checkbox" name="useCustom" /> Use custom backup (no pg_dump)</label>
                <label>Connection string (optional): <input type="text" name="connectionString"
                        placeholder="Leave blank to use DATABASE_URL from server" /></label>
                <button type="button" id="backupBtn">Start Backup</button>
            </form>
            <div id="backupResult"></div>
        </div>

        <div id="cron" class="tab-content">
            <h2>Cron - T·ª± ƒë·ªông Backup</h2>
            <div class="description">
                <p><strong>‚è∞ H∆∞·ªõng d·∫´n Cronjob:</strong></p>
                <ul>
                    <li><strong>Get Status:</strong> Xem tr·∫°ng th√°i cronjob (ƒëang ch·∫°y hay d·ª´ng), l·ªãch backup, l·ªãch s·ª≠
                        backup g·∫ßn nh·∫•t.</li>
                    <li><strong>Start:</strong> B·∫≠t cronjob t·ª± ƒë·ªông backup theo l·ªãch ƒë√£ c·∫•u h√¨nh.</li>
                    <li><strong>Stop:</strong> T·∫°m d·ª´ng cronjob (backup t·ª± ƒë·ªông s·∫Ω ng·ª´ng).</li>
                    <li><strong>Trigger Now:</strong> Ch·∫°y backup ngay l·∫≠p t·ª©c (kh√¥ng c·∫ßn ch·ªù l·ªãch).</li>
                    <li><strong>Update schedule:</strong> Thay ƒë·ªïi l·ªãch backup. V√≠ d·ª•: <code>0 2 * * *</code> = m·ªói ng√†y
                        l√∫c 2 gi·ªù s√°ng.</li>
                </ul>
                <p><strong>üí° Cron schedule format:</strong></p>
                <ul>
                    <li><code>0 2 * * *</code> - M·ªói ng√†y l√∫c 02:00 AM</li>
                    <li><code>0 */6 * * *</code> - M·ªói 6 gi·ªù</li>
                    <li><code>*/30 * * * *</code> - M·ªói 30 ph√∫t</li>
                    <li><code>0 0 * * 0</code> - M·ªói Ch·ªß nh·∫≠t l√∫c 00:00</li>
                </ul>
            </div>
            <div>
                <button id="cronStatusBtn">Get Status</button>
                <button id="cronStartBtn">Start</button>
                <button id="cronStopBtn">Stop</button>
                <button id="cronTriggerBtn">Trigger Now</button>
            </div>
            <form id="cronScheduleForm">
                <label>New schedule: <input type="text" name="schedule" placeholder="e.g. 0 2 * * *" required /></label>
                <button type="submit">Update schedule</button>
            </form>
            <pre id="cronStatus"></pre>
        </div>

        <div id="files" class="tab-content">
            <h2>Files - Qu·∫£n l√Ω File</h2>
            <div class="description">
                <p><strong>üìÅ H∆∞·ªõng d·∫´n Qu·∫£n l√Ω File:</strong></p>
                <ul>
                    <li><strong>List Files:</strong> Hi·ªÉn th·ªã t·∫•t c·∫£ file tr√™n cloud storage.</li>
                    <li><strong>Prefix (t√πy ch·ªçn):</strong> L·ªçc file theo folder. V√≠ d·ª•: nh·∫≠p <code>exe/</code> ƒë·ªÉ ch·ªâ
                        xem file trong folder exe.</li>
                    <li>M·ªói file s·∫Ω c√≥ 2 n√∫t:
                        <ul>
                            <li><strong>Download:</strong> T·∫£i file v·ªÅ m√°y</li>
                            <li><strong>Delete:</strong> X√≥a file kh·ªèi cloud (c·∫ßn x√°c nh·∫≠n tr∆∞·ªõc khi x√≥a)</li>
                        </ul>
                    </li>
                </ul>
                <p><strong>üí° Tip:</strong> File backup database n·∫±m trong folder <code>backups/</code>. Nh·∫≠p prefix ƒë·ªÉ
                    xem nhanh.</p>
            </div>
            <form id="listForm">
                <label>Prefix (l·ªçc theo folder): <input type="text" name="prefix"
                        placeholder="optional - v√≠ d·ª•: exe/ ho·∫∑c backups/" /></label>
                <button type="submit">List Files</button>
            </form>
            <ul id="fileList"></ul>
        </div>

        <div id="logs" class="tab-content">
            <h2>Logs - Nh·∫≠t k√Ω H·ªá th·ªëng</h2>
            <div class="description">
                <p><strong>üìä H∆∞·ªõng d·∫´n Xem Logs:</strong></p>
                <ul>
                    <li><strong>Nh·∫≠t k√Ω t·ª± ƒë·ªông:</strong> H·ªá th·ªëng ghi l·∫°i t·∫•t c·∫£ c√°c h√†nh ƒë·ªông (upload, download,
                        backup, cron...) v·ªõi timestamp ch√≠nh x√°c.</li>
                    <li><strong>Ki·ªÉm tra l·ªãch s·ª≠:</strong> Xem l·∫°i c√°c action ƒë√£ th·ª±c hi·ªán, k·∫øt qu·∫£ th√†nh c√¥ng/l·ªói ƒë·ªÉ
                        debug ho·∫∑c audit.</li>
                    <li><strong>Clear Logs:</strong> X√≥a to√†n b·ªô log ƒë·ªÉ gi·ªØ g·ªçn g√†ng (n√™n xem k·ªπ tr∆∞·ªõc khi x√≥a n·∫øu c·∫ßn
                        gi·ªØ l·∫°i d·ªØ li·ªáu).</li>
                </ul>
                <p><strong>üí° Tip:</strong> Logs ƒë·∫∑c bi·ªát h·ªØu √≠ch ƒë·ªÉ ki·ªÉm tra xem backup t·ª± ƒë·ªông (cron) c√≥ ch·∫°y ƒë√∫ng gi·ªù
                    kh√¥ng, ho·∫∑c t√¨m nguy√™n nh√¢n khi upload/download th·∫•t b·∫°i.</p>
            </div>
            <div id="actionLogs"></div>
            <button id="clearLogs">Clear Logs</button>
        </div>
    </div>
</section>

<script>
    // EJS layout will inject
</script>